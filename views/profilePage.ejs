<!DOCTYPE html>
<html lang="en">
  <head>
    <link rel="stylesheet" href="/css/style.css" />
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>@<%= user.username %>'s Profile Page | PlanIt </title>
  </head>
  <body>
    <div class="navbar">
      <a href="/logo" class="logo"><img src="/imgs/logo.png" alt="PlanIt Logo"></a>
      <% if (hasUnread) { %>
        <a href="/messages" class="menu-inbox"><img src="/imgs/inbox_notification_icon.png" alt="Inbox (Notifications)"></a>
      <% } else { %>
        <a href="/messages" class="menu-inbox"><img src="/imgs/inbox_icon.png" alt="Inbox (No Notifications)"></a>
      <% } %>
      <a href="/search" class="menu-search"><img src="/imgs/search_icon.png" alt="Search"></a>
      <a href="/users/<%=user.userId%>/calendar" class="menu-calendar"><img src="/imgs/calendar_icon.png" alt="Calendar"></a>
    </div>

    <h1 id="navbarEnd"></h1>
    
    <div class="profile-background <%=user.pictureOptions[0]%>">
        <div class="profile-head <%=user.pictureOptions[1]%>"></div>
        <div class="profile-body <%=user.pictureOptions[2]%>"></div>
    </div>
    <h1><%= user.username %>'s Profile Page</h1>

    <h1 class = "space"></h1>

    <% if (user.userId === viewingUser.userId) { %>
      <h1 class="big-text">Welcome to your profile page!</h1>
    <% } else { %>
      <button class="btn-large"><a href = '/report/PROFILE/<%= user.userId %>'>Report</a></button>
      <% if (friendStatus !== "I BLOCKED" && friendStatus !== "THEY BLOCKED") { %>
        <% if (following) { %>
          <div class="center-btn">
            <button class="btn-large"><a href = '/users/unfollow/<%= user.userId %>'>Unfollow</a></button>
          </div>
        <% } else { %>
          <div class="center-btn">
            <button class="btn-large"><a href = '/users/follow/<%= user.userId %>'>Follow</a></button>
          </div>
        <% } %>
        <% if (friendStatus === "NOT FRIEND") { %>
          <button class="btn-large"><a href = '/users/friend/<%= user.userId %>'>Send Friend Request</a></button>
        <% } else if (friendStatus === "FRIEND") { %>
          <button class="btn-large"><a href = '/api/unfriend/<%= user.userId %>'>Unfriend</a></button>
        <% } %>
        <button class="btn-large"><a href = '/users/block/<%=user.userId%>'>Block</a></button>
      <% } else if (friendStatus !== "THEY BLOCKED") { %>
        <button class="btn-large"><a href = '/users/unblock/<%=user.userId%>'>Unblock</a></button>
      <% } %>
    <% } %>

    <h1 class = "space"></h1>
    <div class="center-btn">
      <button class="btn-large"><a href = '/users/<%= user.userId %>/following'>Following: <%= user.following.length %> Users</a></button>
    </div>
    <div class="center-btn">
      <button class="btn-large"><a href = '/users/<%= user.userId %>/followers'>Followers: <%= user.followers.length %> Users</a></button>
    </div>
    <div class="center-btn">
      <button class="btn-large"><a href = '/users/<%= user.userId %>/friends'>Friends: <%= user.otherFriendLists.length %> Users</a></button>
    </div>

    <h1 class = "space"></h1>

    <h1>PROFILE MENU</h1>
    <ul>
        <li>
          <p>- <a href ="/settings">Account Settings</a></p>
        </li>
        <li>
            <p>- <a href="/about">About PlanIt</a></p>
        </li>
        <li>
            <p>- <a href="/guidelines">Rules/Guidelines</a></p>
        </li>
    </ul>

    <style>
      h1, p {
        color: white;
      }
    </style>
  </body>
</html>